From ad704a418d1a6181d2cdab1b6998b114029596e4 Mon Sep 17 00:00:00 2001
From: Adria Lopez <adria.lopez.ortega@gmail.com>
Date: Fri, 26 Feb 2016 17:29:29 +0100
Subject: [PATCH 2/3] Update mongodb driver

---
 .../NServiceBus.MongoDB.Tests.csproj               | 16 +++++++-------
 src/NServiceBus.MongoDB.Tests/packages.config      |  8 +++----
 src/NServiceBus.MongoDB/NServiceBus.MongoDB.csproj | 25 ++++++++++++++--------
 src/NServiceBus.MongoDB/packages.config            |  8 +++----
 src/Sample/Sample.csproj                           | 16 +++++++-------
 src/Sample/packages.config                         |  8 +++----
 6 files changed, 44 insertions(+), 37 deletions(-)

diff --git a/src/NServiceBus.MongoDB.Tests/NServiceBus.MongoDB.Tests.csproj b/src/NServiceBus.MongoDB.Tests/NServiceBus.MongoDB.Tests.csproj
index f34b06c..c2dc1e2 100644
--- a/src/NServiceBus.MongoDB.Tests/NServiceBus.MongoDB.Tests.csproj
+++ b/src/NServiceBus.MongoDB.Tests/NServiceBus.MongoDB.Tests.csproj
@@ -62,20 +62,20 @@
       <HintPath>..\packages\FluentAssertions.3.3.0\lib\net45\FluentAssertions.Core.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Bson, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Bson.2.2.1\lib\net45\MongoDB.Bson.dll</HintPath>
+    <Reference Include="MongoDB.Bson, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Bson.2.2.3\lib\net45\MongoDB.Bson.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Driver.2.2.1\lib\net45\MongoDB.Driver.dll</HintPath>
+    <Reference Include="MongoDB.Driver, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Driver.2.2.3\lib\net45\MongoDB.Driver.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver.Core, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Driver.Core.2.2.1\lib\net45\MongoDB.Driver.Core.dll</HintPath>
+    <Reference Include="MongoDB.Driver.Core, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Driver.Core.2.2.3\lib\net45\MongoDB.Driver.Core.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver.Legacy, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\mongocsharpdriver.2.2.1\lib\net45\MongoDB.Driver.Legacy.dll</HintPath>
+    <Reference Include="MongoDB.Driver.Legacy, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\mongocsharpdriver.2.2.3\lib\net45\MongoDB.Driver.Legacy.dll</HintPath>
       <Private>True</Private>
     </Reference>
     <Reference Include="NServiceBus.Core, Version=5.0.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c, processorArchitecture=MSIL">
diff --git a/src/NServiceBus.MongoDB.Tests/packages.config b/src/NServiceBus.MongoDB.Tests/packages.config
index d94d3b6..41f8031 100644
--- a/src/NServiceBus.MongoDB.Tests/packages.config
+++ b/src/NServiceBus.MongoDB.Tests/packages.config
@@ -4,10 +4,10 @@
   <package id="AutoFixture.Xunit2" version="3.34.2" targetFramework="net45" />
   <package id="CategoryTraits.Xunit2" version="2.0.13" targetFramework="net45" />
   <package id="FluentAssertions" version="3.3.0" targetFramework="net45" />
-  <package id="mongocsharpdriver" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Bson" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Driver" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Driver.Core" version="2.2.1" targetFramework="net45" />
+  <package id="mongocsharpdriver" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Bson" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Driver" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Driver.Core" version="2.2.3" targetFramework="net45" />
   <package id="NServiceBus" version="5.2.14" targetFramework="net45" />
   <package id="xunit" version="2.0.0" targetFramework="net45" />
   <package id="xunit.abstractions" version="2.0.0" targetFramework="net45" />
diff --git a/src/NServiceBus.MongoDB/NServiceBus.MongoDB.csproj b/src/NServiceBus.MongoDB/NServiceBus.MongoDB.csproj
index c4e2627..b1adbe4 100644
--- a/src/NServiceBus.MongoDB/NServiceBus.MongoDB.csproj
+++ b/src/NServiceBus.MongoDB/NServiceBus.MongoDB.csproj
@@ -62,9 +62,16 @@
     <CodeContractsCacheAnalysisResults>False</CodeContractsCacheAnalysisResults>
     <CodeContractsFailBuildOnWarnings>True</CodeContractsFailBuildOnWarnings>
     <CodeContractsBeingOptimisticOnExternal>True</CodeContractsBeingOptimisticOnExternal>
-    <CodeContractsRuntimeCheckingLevel>Full</CodeContractsRuntimeCheckingLevel>
+    <CodeContractsRuntimeCheckingLevel>None</CodeContractsRuntimeCheckingLevel>
     <CodeContractsReferenceAssembly>DoNotBuild</CodeContractsReferenceAssembly>
     <CodeContractsAnalysisWarningLevel>3</CodeContractsAnalysisWarningLevel>
+    <CodeContractsAssertsToContractsCheckBox>True</CodeContractsAssertsToContractsCheckBox>
+    <CodeContractsRedundantTests>True</CodeContractsRedundantTests>
+    <CodeContractsMissingPublicEnsuresAsWarnings>False</CodeContractsMissingPublicEnsuresAsWarnings>
+    <CodeContractsInferEnsuresAutoProperties>True</CodeContractsInferEnsuresAutoProperties>
+    <CodeContractsSuggestAssumptionsForCallees>False</CodeContractsSuggestAssumptionsForCallees>
+    <CodeContractsNecessaryEnsures>True</CodeContractsNecessaryEnsures>
+    <CodeContractsSkipAnalysisIfCannotConnectToCache>False</CodeContractsSkipAnalysisIfCannotConnectToCache>
   </PropertyGroup>
   <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
     <DebugType>pdbonly</DebugType>
@@ -161,20 +168,20 @@
     <CodeContractsRedundantTests>True</CodeContractsRedundantTests>
   </PropertyGroup>
   <ItemGroup>
-    <Reference Include="MongoDB.Bson, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Bson.2.2.1\lib\net45\MongoDB.Bson.dll</HintPath>
+    <Reference Include="MongoDB.Bson, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Bson.2.2.3\lib\net45\MongoDB.Bson.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Driver.2.2.1\lib\net45\MongoDB.Driver.dll</HintPath>
+    <Reference Include="MongoDB.Driver, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Driver.2.2.3\lib\net45\MongoDB.Driver.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver.Core, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Driver.Core.2.2.1\lib\net45\MongoDB.Driver.Core.dll</HintPath>
+    <Reference Include="MongoDB.Driver.Core, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Driver.Core.2.2.3\lib\net45\MongoDB.Driver.Core.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver.Legacy, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\mongocsharpdriver.2.2.1\lib\net45\MongoDB.Driver.Legacy.dll</HintPath>
+    <Reference Include="MongoDB.Driver.Legacy, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\mongocsharpdriver.2.2.3\lib\net45\MongoDB.Driver.Legacy.dll</HintPath>
       <Private>True</Private>
     </Reference>
     <Reference Include="NServiceBus.Core, Version=5.0.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c, processorArchitecture=MSIL">
diff --git a/src/NServiceBus.MongoDB/packages.config b/src/NServiceBus.MongoDB/packages.config
index 9e51260..01f4e20 100644
--- a/src/NServiceBus.MongoDB/packages.config
+++ b/src/NServiceBus.MongoDB/packages.config
@@ -1,9 +1,9 @@
 ﻿<?xml version="1.0" encoding="utf-8"?>
 <packages>
-  <package id="mongocsharpdriver" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Bson" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Driver" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Driver.Core" version="2.2.1" targetFramework="net45" />
+  <package id="mongocsharpdriver" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Bson" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Driver" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Driver.Core" version="2.2.3" targetFramework="net45" />
   <package id="NServiceBus" version="5.2.14" targetFramework="net45" />
   <package id="StyleCop.MSBuild" version="4.7.49.1" targetFramework="net45" developmentDependency="true" />
 </packages>
\ No newline at end of file
diff --git a/src/Sample/Sample.csproj b/src/Sample/Sample.csproj
index c13931e..45ac9f1 100644
--- a/src/Sample/Sample.csproj
+++ b/src/Sample/Sample.csproj
@@ -49,20 +49,20 @@
     <StartupObject />
   </PropertyGroup>
   <ItemGroup>
-    <Reference Include="MongoDB.Bson, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Bson.2.2.1\lib\net45\MongoDB.Bson.dll</HintPath>
+    <Reference Include="MongoDB.Bson, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Bson.2.2.3\lib\net45\MongoDB.Bson.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Driver.2.2.1\lib\net45\MongoDB.Driver.dll</HintPath>
+    <Reference Include="MongoDB.Driver, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Driver.2.2.3\lib\net45\MongoDB.Driver.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver.Core, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\MongoDB.Driver.Core.2.2.1\lib\net45\MongoDB.Driver.Core.dll</HintPath>
+    <Reference Include="MongoDB.Driver.Core, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\MongoDB.Driver.Core.2.2.3\lib\net45\MongoDB.Driver.Core.dll</HintPath>
       <Private>True</Private>
     </Reference>
-    <Reference Include="MongoDB.Driver.Legacy, Version=2.2.1.6, Culture=neutral, processorArchitecture=MSIL">
-      <HintPath>..\packages\mongocsharpdriver.2.2.1\lib\net45\MongoDB.Driver.Legacy.dll</HintPath>
+    <Reference Include="MongoDB.Driver.Legacy, Version=2.2.3.3, Culture=neutral, processorArchitecture=MSIL">
+      <HintPath>..\packages\mongocsharpdriver.2.2.3\lib\net45\MongoDB.Driver.Legacy.dll</HintPath>
       <Private>True</Private>
     </Reference>
     <Reference Include="NServiceBus.Core, Version=5.0.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c, processorArchitecture=MSIL">
diff --git a/src/Sample/packages.config b/src/Sample/packages.config
index dc7ed09..0cbf39a 100644
--- a/src/Sample/packages.config
+++ b/src/Sample/packages.config
@@ -1,9 +1,9 @@
 ﻿<?xml version="1.0" encoding="utf-8"?>
 <packages>
-  <package id="mongocsharpdriver" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Bson" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Driver" version="2.2.1" targetFramework="net45" />
-  <package id="MongoDB.Driver.Core" version="2.2.1" targetFramework="net45" />
+  <package id="mongocsharpdriver" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Bson" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Driver" version="2.2.3" targetFramework="net45" />
+  <package id="MongoDB.Driver.Core" version="2.2.3" targetFramework="net45" />
   <package id="NServiceBus" version="5.2.14" targetFramework="net45" />
   <package id="NServiceBus.Host" version="6.0.0" targetFramework="net45" />
 </packages>
\ No newline at end of file
-- 
2.8.1.windows.1

